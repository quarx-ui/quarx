# Commit Conventions

Для правильного версионирования пакетов и генерации CHANGELOG необходимо соблюдать определенный [формат](#формат)
при создании коммита. Наш формат основан на спецификации [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/),
однако имеет некоторые отличия.

## Содержание
- [Формат](#формат)
    - [type](#type)
    - [scope](#scope)
    - [summary](#summary)
    - [issue](#issue)
    - [body](#body)
    - [footer](#footer)
- [Breaking Changes](#breaking-changes)
    - [С помощью summary](#с-помощью-summary)
    - [С помощью footer](#с-помощью-footer)
- [Примеры коммитов](#примеры-коммитов)
    - [Feature](#feature)
    - [Feature and Breaking Footer](#feature-and-breaking-footer)
    - [Bug Fix](#bug-fix)
    - [Code Refactor](#code-refactor)
    - [Documentation](#documentation)
    - [Technical commit](#technical-commit)

## Формат

Необязательные параметры указаны в [квадратных скобках]:

```
<type>[(<scope>)]: [<issue> -] <summary>

[<body>]

[<footer(s)>]
```

### type
Тип коммита, который будет отображен в CHANGELOG. Для каждого npm пакета ведется свой CHANGELOG, в который
попадают изменения, произведенные именно в папке пакета. Например, коммиты, касающиеся файлов в папке `packages/core`
не повлияют на CHANGELOG в `packages/icons`, и наоборот. Для автоматической генерации списка изменений используются
следующие типы коммитов:

- `feat` или `feature` – добавление новой функциональности в библиотеку. Это может быть новый компонент (функция) или
  доработка уже существующих;
- `fix` или `bugfix` – исправление багов и ошибок;
- `refactor` – изменение поведения компонента, либо внутренней организации кода в библиотеке;
- `style` – изменение визуального отображения компонентов, без изменений в логике работы;
- `figma` – выгрузка исходников из figma (иконки, цвета, палитра, типографика и тп);
- `docs` - разработка и обновление документации;
- `test` – написание тестов на компоненты, либо доработка инструментов тестирования;
- `tech` – любые коммиты, которые не относятся к вышеперечисленным типам.

### scope
Область кода, либо имя компонента или функции, над которыми ведется работа.

### summary
Основной текст коммита, который попадет в CHANGELOG. Должен кратко описывать произведенные изменения,
может опираться на название issue, в рамках которого ведется работа.

### issue
Номер issue в нашем GitHub репозитории, в рамках которого ведется работа. Некоторые коммиты могут не иметь прямого
отношения ни к одному из issues, в таком случае `issue` не указывается.

### body
Полный текст коммита, в генерации CHANGELOG не используется. Здесь может быть список изменений или их подробное
описание. `body` обязательно отделяется пустой строкой сверху, формат написания свободный.

### footer
Отделяется пустой строкой, может быть использован для описания критических изменений
(см. [__Breaking Changes__](#breaking-changes)), или для приведения дополнительной информации в
формате [git trailer format](https://git-scm.com/docs/git-interpret-trailers).

## Breaking Changes

Иногда при развитии библиотеки приходится делать изменения, при которых пропадает совместимость с предыдущими версиями.
Такие изменения называются `Breaking Changes` и могут быть добавлены в CHANGELOG двумя способами:

### С помощью summary
Добавление `!` перед двоеточием (`<type>[scope]!: <summary>`). Используется в том случае,
когда `summary` коммита совпадает с критическими изменениями.

Пример: `refactor!: Убрана поддержка Internet Explorer`

### С помощью footer
Добавление футера `BREAKING CHANGE: <description>`. Желательно использовать в большинстве случаев. Здесь могут
быть подробно описаны все критические изменения, допускаются многострочные описания. Критические изменения в логе
__отображаются отдельно от коммита__, поэтому не должны опираться на текст коммита.

Пример использования футера `BREAKING CHANGE` есть ниже.

## Примеры коммитов

### Feature
```
feat: #72 – Добавление хука для использования медиа-запросов
```

### Feature and Breaking Footer
```
feat: #19 – Обновление базовой типографики

BREAKING CHANGE: Изменен интерфейс и набор свойств базового объекта typography.
```

### Bug Fix
```
fix(Loader): #43 – Отсутствует свойство className
```

### Code Refactor
```
refactor: Исправление циклических зависимостей
```

### Documentation
```
docs(Checkbox): #84 - Добавление документации в StoryBook
```

### Technical commit
```
tech(eslint): Подключение правил react-hooks
```
